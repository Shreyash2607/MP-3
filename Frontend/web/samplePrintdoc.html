<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="style.css" />
        <script defer src="index.js"></script>
        <script defer src="main.js"></script>
        <script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/0.9.0rc1/jspdf.min.js"></script>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;400;500;600;700;800&display=swap" rel="stylesheet" />
        <script src="/css/bootstrap.min.css"></script>
        <script src="/css/bulma.min.css"></script>
        <script src="/js/bootstrap.min.js"></script>
        <script src="/js/jquery-3.5.1.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
       
        <title>QSON Tech</title>
    </head>
    <body>
        <nav>
            <div class="navigaion">
                <span class="brand">
                    <!-- <h1>QSON</h1>
                    <small>TECH</small> -->
                    <img draggable="false" src="../assets/qson-tech.png" alt="QSON Tech">
                </span>
                <div class="nav-options">
                    <ul>
                        <li>
                            <div class="img-wrap">
                                <img draggable="false" src="../assets/user.png" alt="profile" />
                            </div>
                            <span>Profile</span>
                        </li>
                        <li>
                            <div class="img-wrap">
                                <img draggable="false" src="../assets/video-camera.png" alt="help" />
                            </div>
                            <span>Help</span>
                        </li>
                    </ul>
                </div>
            </div>
            <hr class="hr-fade-out-center" />
        </nav>

        <section>
            <div class="test-sample">
                <span>Test</span>
            </div>
        </section>

        <main>
            <div class="main-layout">
                <div class="left-panel">
                    <section class="section-1">
                        <div class="part-1">
                            <div class="title">Mathematical Operations</div>
                            <div class="all-fiels">
                                <div class="fields">
                                    <div class="input">
                                        <label for="mean-value">Mean Value</label>
                                        <input type="text" id="mean-value" placeholder="00" value=""/>
                                    </div>
                                    <div class="input">
                                        <label for="mean-value">Median Value</label>
                                        <input type="text" id="median" placeholder="00" />
                                    </div>
                                    <div class="input">
                                        <label for="standard-deviation">Standard Deviation</label>
                                        <input type="text" id="standard-deviation" placeholder="00" />
                                    </div>
                                </div>
                                <div class="fields">
                                    <div class="input">
                                        <label for="min">Min</label>
                                        <input type="text" id="min" placeholder="00" value=""/>
                                    </div>
                                    <div class="input">
                                        <label for="max">Max</label>
                                        <input type="text" id="max" placeholder="00" value="" />
                                    </div>
                                    <div class="input">
                                        <label for="range">Range</label>
                                        <input type="text" id="range" placeholder="00" value=""/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="part-2">
                            <label for="rockwell-value">Rockwell Value</label>
                            <textarea name="" id="Rockwell" ></textarea>
                        </div>
                        <div class="part-3">
                            <button  type="submit" id="save" class="btn btn-save " >Save Results</button>
                            <button type="submit"  class="btn btn-results">Open Results</button>
                            <button class="btn btn-close">Close</button>
                        </div>
                    </section>
                    <section class="section-2">
                        <!-- <div class="y-align-graph">
                            <div class="y-label">Hardness</div>
                            <convas id= "myChart" hegiht="400" width="400" class="graph-container">

                            </convas>
                        </div>
                        <div class="x-label">No. of Jobs</div> -->
                        <div id="content">
                        <div id="chart">
                            <div id="chart_div" ></div>
                        </div>
                        </div>
                        <div id="elementH"></div>
                        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
                        
                    </section>
                </div>
                <div class="right-panel">
                    <section class="section-3">
                        <div class="right-fields">
                            <label for="file-name">File Name</label>
                            <input type="text" id="file-name" placeholder="Lorem ipsum" />
                        </div>
                        <div class="right-fields">
                            <label for="job-desc">Job Description</label>
                            <input type="text" id="job-desc" placeholder="Lorem ipsum" />
                        </div>
                        <div class="right-fields">
                            <label for="cust-name">Cust. Name</label>
                            <input type="text" id="cust-name" placeholder="Lorem ipsum" />
                        </div>
                        <div class="right-fields">
                            <label for="cust-address">Cust. Address</label>
                            <input type="text" id="cust-address" placeholder="Lorem ipsum" />
                        </div>
                        <div class="extra-container">
                            <div>
                                
                                <br />
                                
                            </div>
                            <div class="plus-icon" id="submit">&plus;</div>
                            <div class="plus-icon" id="remove" onclick="removeAll()">&minus;</div>
                        </div>
                        <div class="left-textarea">
                            <div class="lt">
                                <p>Rockwell Sample Values</p>
                                <ul id="dynamic-list"></ul>
                                
                            </div>
                        </div>
                        <div class="right-fields">
                            <label for="file-name">Print</label>
                            <button class="btn btn-save " onclick="convertPdf(event)">Print</button>
                        </div>
                    </section>
                    <div class="right-menu">
                        <ul>
                            <li>•</li>
                            <li>•</li>
                            <li>•</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </body>
    <div>
     
        <script>

            const labels = [
              'January',
              'February',
              'March',
              'April',
              'May',
              'June',
            ];
          
            const data = {
              labels: labels,
              datasets: [{
                label: 'My First dataset',
                backgroundColor:"red",
                borderColor: 'rgb(255, 99, 132)',
                data: [0, 10, 5, 2, 20, 30, 45],
              }]
            };
          
            const config = {
              type: 'line',
              data: data,
              options: {}
            };
          </script>
          <script>
            const myChart = new Chart(
              document.getElementById('myChart'),
              config
            );
          </script>
           <script>
                
            const ipc = require('electron').ipcRenderer;
            const saveBtn = document.getElementById('save')
            
            saveBtn.addEventListener('click', function (event) {
                const ull = document.querySelectorAll('ul li');
                let arr=[];
                for(let i=0;i<ull.length;i++)
                {
                    if(ull[i].id!="")
                    arr.push(ull[i].id);
                }
                console.log(arr);
              ipc.send('saveData', {
                  _id:document.getElementById("file-name").value,
                  custName:document.getElementById("cust-name").value,
                  jobDesc:document.getElementById("job-desc").value,
                  hardnessArr:arr,
                  mean:document.getElementById("mean-value").value,
                  min:document.getElementById("min").value,
                  max:document.getElementById("max").value,
                  range:document.getElementById("range").value,
                  median:document.getElementById("median").value,
                  stdDev:document.getElementById("standard-deviation").value,
                  custAdd:document.getElementById("cust-address").value        
                });
            })
            </script>

            <script>
    convertPdf = (event) =>{
      event.preventDefault();
     
      var chart = document.getElementById("content").innerHTML; 
    var mean=document.getElementById("mean-value").value;
     var median=document.getElementById("median").value;
     var stddevation=document.getElementById("standard-deviation").value;
     var max=document.getElementById("max").value;
     var min=document.getElementById("min").value;
     var range=document.getElementById("range").value;
     const ull = document.querySelectorAll('ul li');
     let arr=[];
      for(let i=0;i<ull.length;i++)
       {
         if(ull[i].id!="")
             arr.push(ull[i].id);
        }
        const filename=document.getElementById("file-name").value;
        const jobDesc=document.getElementById("job-desc").value;
        var dateObj = new Date();
var month = dateObj.getUTCMonth() + 1; //months from 1-12
var day = dateObj.getUTCDate();
var year = dateObj.getUTCFullYear();
newdate = day + "/" + month + "/" + year;
        console.log(filename);
    var pdf='<!DOCTYPE html><html lang="en"><head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Test Report</title> <style>body:before, body:after{left: 0; right: 0;}body:before{top: 0;}body:after{bottom: 0;}body{border: 5px solid black; border: 5px solid black;}.table2 table{font-family: arial, sans-serif; border-collapse: collapse; width: 100%; margin-left: 4rem;}.table2 td{text-align: center; padding: 8px;}.table2 th{text-align: center; padding: 8px;}.table2{padding: 15px;}.table1 table{font-family: arial, sans-serif; border-collapse: collapse; width: 50%; margin-left: 4rem;}.table1{padding: 15px;}.table1 td{border: 1px solid #dddddd; text-align: center; padding: 8px;}.table1 th{border: 1px solid #dddddd; text-align: center; padding: 8px;}.table1 tr:nth-child(even){background-color: #dddddd;}.content{padding: 15px;}.table3 table{width: 100%;}.table3 th{width: 50%;}.table3 p{font-size: 3.5rem;}.under-line{text-decoration: underline;}</style></head><body> <div class="content"> <div style="text-align:center;"> <h1 style="text-decoration: underline;">TEST REPORT</h1> </div><hr> <div> <div class="table3"> <table > <tr> <th> <img src="../assets/qson-tech.png" alt="company-logo" width="175x" height="100px"></th> <th><p>Quson-Tech</p></th> </tr></table> </div></div><hr> <div> <h2>File Name:'
        pdf=pdf+filename;
        pdf+='</h2> <h2>Date: ';
        pdf+=newdate;
        pdf+='</h2> <h2>Job description: '
        pdf+=jobDesc;  
        pdf+='</h2> </div><hr/> <h2 class="under-line">Results:</h2> <div class="table1"> <table> <tr> <th>SR No.</th> <th>Hardness Value</th> </tr>';
            
        for(let i=0;i<arr.length;i++)
        {
            pdf=pdf+`<tr> <td>${i+1}</td><td>${arr[i]}</td></tr>`;
        }
        pdf+='</table> </div><hr/> <h2 class="under-line">Mathematical Operations:</h2> <div class="table1"> <table> <tr> <th>Operations</th> <th>Values</th> </tr><tr> <td>Mean</td><td>';
        pdf+=mean;
        pdf+='</td></tr><tr> <td>Medain</td><td>';
        pdf+=median;
        pdf+='</td></tr><tr> <td>Standard Deviation</td><td>';
        pdf+=stddevation;
        pdf+='</td></tr><tr> <td>Min</td><td>';
        pdf+=min;
        pdf+='</td></tr><tr> <td>Max</td><td>';
        pdf+=max;
        pdf+='</td></tr><tr> <td>Range</td><td>';
        pdf+=range;
        pdf+='</td></tr></table> </div><hr/> <h2 class="under-line">Graph:</h2> <div class="table1">';
        pdf+=chart;  
        pdf+='</div><hr/> <div class="table2"> <table> <tr> <th>Tested By:</th> <th>Witnessed By:</th> <th>Approved By:</th> </tr><tr> <th></th> <th></th> <th></th> </tr></table> </div></div></body></html>';
  


     
    //  Data plot
        // CREATE A WINDOW OBJECT.
        var win = window.open('', '', 'height=900,width=900');

       
        win.document.write(pdf);

        win.document.close(); 	// CLOSE THE CURRENT WINDOW.
        
        //win.save();
        win.print();    // PRINT THE CONTENTS.
        
  }
            </script>
    </div>
</html>